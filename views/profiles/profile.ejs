<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/css/profile.css">
    <link href="//db.onlinewebfonts.com/c/eeb2719d248b27841be5f4899986eedc?family=Sentinel+Book" rel="stylesheet" type="text/css"/>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous"> -->
    <!-- <script type="text/javascript" src="profile.js"></script> -->
<title>Test</title>
</head>
<body onload="fillinVar()">
	<a href="https://www.gooffco.com/">
    	<div class="logo">
        	<img src="/GO_Off.png"/>
    	</div>
    </a>


    <div class="droparrow">
        <button onclick="dropclick1()" class="dropBtn">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAMFBMVEX///8AAAB8fHzT09N+fn56enra2trW1tZxcXF0dHR3d3evr6/S0tJubm6CgoKtra1JiZe/AAADV0lEQVR4nO3c227bMAyA4TrnpNv6/m+7aZrqKGZs2daB1P7vdi4ggqRIocU+PgAAAAAAAAAAAAAAAAAAAAAAAID/we3a+gQbXG/p396H4VjuJIUch+Ge+u2fAIfBWhav7tCPtG9/Dn9dyp4os4s/dFKh3od/LGXxGg6dUKiP4ZudXjyOh14s1PvwxEoWr8+HXsjibYjY6MVLfOjZXnwMLywU6vH10DOF+vn6rYVCvU4P/fn+60kO9RfqZXrk89z3B2tZFDJ4mP8JIUTNvTjpwcUAjWVRyOBp+afOdnpR6MHFDDpCiDqzKGRw9pIZnWz0otCDCSXqCb2or1C3lqhnIMR9ARoYGlvGREx5L+7pwUD10Fi7qskUj/71q5pMbaHmKFFPaRZzZdBROTT2jomYcN20LlShRDdcMiN1vZivBwNlQyPPmIip6sW8PRgoWuD2r2oyoRfbDI1tL/oUSnqxTIl6Kl79OQf9lIKhkX9MxJovcGUz6DQeGiV7MGi6wOVe1WQNe7F0DwbNhkaJVU3W6Lopf8mMmixwpVY1WYMFrtyqJqs+NGqMiVjlBW77L1+2qzo0ao2JWMVCrV+iXrUQWwVYbWjUHROxKr3YpgeDCgtcvVVNVnyBq7mqyQoXatsS9YoucLVXNVnBodFuTMSKvfrrvOhTFOpFDT0YFBkaWkrUK9CLQoDNMuhkX+BarmqyzENDx5iIZe1FXT0YZFzg2q9qsmxDQ9OYiGXqRY09GAghru9FbWMilmGB07OqyXb3ot4eDHYOjdYv+hS7rhvNl8xoR6HqL1FvcxZtZNDZ+NLQuarJNi1wWlc12YZetNKDweos2sqgs3KB072qyVa9+vW96FOs6EVrPRgkL3AWVjVZ4nVj75IZJRWq1RL1EhY42wEmLHCWS9Rb+LubH9N/NnLJjGZ7UQjQVIl6M4Vqv0S9twucnffgkjcLnFCiJjPoiL3YRw8Gwo0q/C8/5m7RZ0Kh9lOinlCo/ZSotxSi+QCXQuwgQPG6+Wb6khm9z2IXGXTeZdH4LfpMzmI3GXSkELsKUAqxswCn201HPRgceg8wLtTuStQbQ/zV+iilnHoPMPRipyXqnfrOoHPuO4POV+sDAAAAAAAAAAAAAAAAAAAAAAAAoHe/AQQRFMg6Uc/3AAAAAElFTkSuQmCC" width="20" height="20">
            <div id="arrowdrop" class="dropdown-arrowcontent">
                <!-- <a href="/profile">Go to Profile</a> -->
                <a href="/profile_edit">Settings and Privacy</a>
                <!-- <p>Install Chrome Extension</p> -->
                <a href="https://www.go-off.co/">Log Out</a>
            </div>
        </button>
    </div>

    <div class="name">
        <div class="fpname" style= "display: inline-block">
            <h><span id="fpname"></span></h>
        </div>

        <!-- <div class="lpname" style= "display: inline-block">
            <h><span id="lpname"></span></h>
        </div> -->
    </div>
    

    <div class="fprofpic">
        <img id="fprofpic" src="https://miro.medium.com/max/316/1*LGHbA9o2BKka2obwwCAjWg.jpeg"/>
    </div> 
    
    <!-- <button type="submit" id="Plus">
        <img src="/Plus.jpg" alt="add icon" height="65" width="50">
    </button> -->

    <button type="submit" id="Submit" onclick="searchBar()">
        <img src="/Search.png" alt= "profile icon 1" height="40" width="40">
    </button>

    <button id="Cancel" onclick="searchBar1()">Cancel</button>
    

    <form id="bar_form">
        <input type="text" id="search" style="display: block" placeholder="Filter">
    </form>


    <div id="line" style="top: 5%;"><hr></div>


    <div id="top-profile">
        <img id = "profile-pic"/>
        <div id="profile-name">
            <h1 id= "profile-fname" style= "display: inline-block"></h1>
            <!-- <h1 id= "profile-lname" style= "display: inline-block"></h1> -->
        </div>
        <h3 id="user-name"></h3>
        <h4 id= "follower-count"></h4>
        <h4 id = "following-count"></h4>
        <h4 id = "post-count"></h4>
        <img id = "location-logo" src = "https://cdn.iconscout.com/icon/free/png-256/location-1387-448334.png"/>
        <h4 id = "location"></h4>
        <h4 id = "bio"></h4>
    </div>

<h1 id="articles"> Articles:</h1>


<div id="article-1">
	<a id="article1_link">
        <img id="article-1-image"/>
    </a>
    <a id="article1_link1">
        <h3 id="article-1-title"> </h3>
    </a>
	<a id="article1_link2">
		<h4 id="article-1-author"></h4>
	</a>
	<a id="article1_link3">
		<h4 id="article-1-read-time"> </h4>
    </a>
    <div class="Chat1">
        <button onclick="passurl1()" id="Dot">
            Chat
        </button>
    </div>
</div>
    
<div id="article-2">
	<!-- Need to find a way to get the first image from a post and use that as the thumbnail image automatically -->
	<a id="article2_link">
        <img id="article-2-image"/>
	</a>
	<a id="article2_link1">
		<h3 id="article-2-title"> </h3>
	</a>
	<a id="article2_link2">
		<h4 id="article-2-author"></h4>
	</a>
	<a id="article2_link3">
		<h4 id="article-2-read-time"> </h4>
    </a>
    <div class="Chat2">
        <button type="button" onclick="passurl2()">
            Chat
        </button>
    </div>
</div>

<div id="article-3">
	<!-- Need to find a way to get the first image from a post and use that as the thumbnail image automatically -->
	<a id="article3_link">
        <img id="article-3-image"/>
	</a>
	<a id="article3_link1">
		<h3 id="article-3-title"> </h3>
	</a>
	<a id="article3_link2">
		<h4 id="article-3-author"></h4>
	</a>
	<a id="article3_link3">
		<h4 id="article-3-read-time"> </h4>
    </a>
    <div class="Chat3">
        <button onclick="passurl3()" id="Dot2">
            Chat
        </button>
    </div>
</div>
<a href="https://www.gooffco.com/">
	<button type="submit" id="Home" >
    	<img src="/Home.png" alt="house icon" height="20" width="20"/>
    	Home
	</button>
</a>
</br>
<a href="https://docs.google.com/forms/d/e/1FAIpQLScRZFA4owbzMnqmcS2D02LMqHks2RhoQfvfwZpTpcGtOkWwLA/viewform">
    <button type="submit" id="Profile">
        <img src="https://i7.pngguru.com/preview/906/222/368/computer-icons-user-profile-avatar-french-people.jpg" alt="profile icon" height="20" width="20"/>
        Beta Sign Up
    </button>
</a>
</br>
<a href="Mailto:sn23@bu.edu" >
    <button type="submit" id="Contact">
        Contact us
    </button>
</a>
<!-- <button type="submit" id="Notification">
    <img src="https://freeiconshop.com/wp-content/uploads/edd/notification-outline.png" alt="notification icon" height="20" width="20"/>
    Notifications
</button> -->


<script>
    document.getElementById("bar_form").style.visibility="hidden";
    function searchBar(){
        document.getElementById("Submit").style.visibility = "hidden";
        // document.getElementById("Plus").style.visibility = "hidden";
        document.getElementById("Cancel").style.visibility = "visible";
        document.getElementsByClassName('fprofpic')[0].style.visibility = "hidden";
        document.getElementsByClassName('fpname')[0].style.visibility = "hidden";
        //document.getElementsByClassName('lpname')[0].style.visibility = "hidden";
        document.getElementById("bar_form").style.visibility="visible";
        document.getElementById("droparrow").style.display="none";
    }
    function searchBar1(){
        document.getElementById("Submit").style.visibility = "visible";
        // document.getElementById("Plus").style.visibility = "visible";
        document.getElementById("Cancel").style.visibility = "hidden";
        document.getElementsByClassName('fprofpic')[0].style.visibility = "visible";
        document.getElementsByClassName('fpname')[0].style.visibility = "visible";
        //document.getElementsByClassName('lpname')[0].style.visibility = "visible";
        document.getElementById("bar_form").style.visibility="hidden";
        document.getElementById("droparrow").style.display="block";
    }

    // function dropclick1() {
    //     document.getElementById("arrowdrop").classList.toggle("show");
    // }
    function dropclick1() {
            var x = document.getElementById("arrowdrop");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }

    function passurl1(){
        var xhr1 = new XMLHttpRequest();
        xhr1.onreadystatechange = function() {
            // if (this.readyState == 4 && this.status == 200) {
                var idnum = JSON.parse(this.responseText);
                // console.log('the idnum set to', idnum.id);
                // socket.emit('room', idnum.id); //sets the room to that idnum returned
                
                console.log("hello");
                location.href="/chat/" + idnum.id;
            // }else{
            //     console.log("its not working");
            // }
        };
            console.log(document.getElementById("article1_link").href);
            xhr1.open("GET", '/api/chat/getid?article='+ document.getElementById("article1_link").href, true);
            xhr1.send();
    }

    function passurl2(){
        var xhr2 = new XMLHttpRequest();
        xhr2.onreadystatechange = function() {
            // if (this.readyState == 4 && this.status == 200) {
                var idnum = JSON.parse(this.responseText);
                // console.log('the idnum set to', idnum.id);
                // socket.emit('room', idnum.id); //sets the room to that idnum returned
                
                console.log("hello");
                location.href="/chat/" + idnum.id;
            // }else{
            //     console.log("its not working");
            // }
        };
            console.log(document.getElementById("article1_link").href);
            xhr2.open("GET", '/api/chat/getid?article='+ document.getElementById("article2_link").href, true);
            xhr2.send();
    }

    function passurl3(){
        var xhr3 = new XMLHttpRequest();
        xhr3.onreadystatechange = function() {
            // if (this.readyState == 4 && this.status == 200) {
                var idnum = JSON.parse(this.responseText);
                // console.log('the idnum set to', idnum.id);
                // socket.emit('room', idnum.id); //sets the room to that idnum returned
                
                console.log("hello");
                location.href="/chat/" + idnum.id;
            // }else{
            //     console.log("its not working");
            // }
        };
            console.log(document.getElementById("article3_link").href);
            xhr3.open("GET", '/api/chat/getid?article='+ document.getElementById("article3_link").href, true);
            xhr3.send();
    }

    // window.onclick = function(event) {
    //     if (!event.target.matches('.One_Dot')) {
    //         var dropdowns = document.getElementsByClassName("dropdot-content");
    //         var i;
    //         for (i = 0; i < dropdowns.length; i++) {
    //             var openDropdown = dropdowns[i];
    //             if (openDropdown.classList.contains('show')) {
    //             openDropdown.classList.remove('show');
    //             }
    //         }
    //     }
    //     else if (!event.target.matches('.Two_Dot')) {
    //         var dropdowns = document.getElementsByClassName("dropdot1-content");
    //         var i;
    //         for (i = 0; i < dropdowns.length; i++) {
    //             var openDropdown = dropdowns[i];
    //             if (openDropdown.classList.contains('show')) {
    //             openDropdown.classList.remove('show');
    //             }
    //         }
    //     }
    //     else if (!event.target.matches('.Three_Dot')) {
    //         var dropdowns = document.getElementsByClassName("dropdot2-content");
    //         var i;
    //         for (i = 0; i < dropdowns.length; i++) {
    //             var openDropdown = dropdowns[i];
    //             if (openDropdown.classList.contains('show')) {
    //             openDropdown.classList.remove('show');
    //             }
    //         }
    //     }
    // }
    function fillinVar(){
        (function(){
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var myArr = JSON.parse(this.responseText);
                    console.log(myArr);
                    document.getElementById("fpname").innerHTML = myArr.user.firstname; 
                    //document.getElementById("lpname").innerHTML = myArr.user.lastname; 
                    document.getElementById("profile-fname").innerHTML = myArr.user.firstname;
                    //document.getElementById("profile-lname").innerHTML = myArr.user.lastname;
                    document.getElementById("user-name").innerHTML = "@" + myArr.user.username;
                    document.getElementById("location").innerHTML = myArr.user.location;
                    document.getElementById("profile-pic").src = myArr.user.propic;
                    document.getElementById("fprofpic").src = myArr.user.propic;

                    document.getElementById("follower-count").innerHTML = myArr.user.followers + " " + " Followers";
                    document.getElementById("following-count").innerHTML = myArr.user.following + " Following";
                    document.getElementById("post-count").innerHTML = myArr.user.Posts + " Posts";
                    document.getElementById("location").innerHTML = myArr.user.location;
                    document.getElementById("bio").innerHTML = myArr.user.bio;

                    document.getElementById("article1_link").setAttribute("href", myArr.user.article1link);
                    document.getElementById("article1_link1").setAttribute("href", myArr.user.article1link);
                    document.getElementById("article1_link2").setAttribute("href", myArr.user.article1link);
                    document.getElementById("article1_link3").setAttribute("href", myArr.user.article1link);
                    document.getElementById("article-1-image").src = myArr.user.article1img;
                    document.getElementById("article-1-title").innerHTML = myArr.user.article1title;
                    document.getElementById("article-1-author").innerHTML = myArr.user.article1author;
                    document.getElementById("article-1-read-time").innerHTML = myArr.user.article1readtime;

                    document.getElementById("article2_link").setAttribute("href", myArr.user.article2link);
                    document.getElementById("article2_link1").setAttribute("href", myArr.user.article2link);
                    document.getElementById("article2_link2").setAttribute("href", myArr.user.article2link);
                    document.getElementById("article2_link3").setAttribute("href", myArr.user.article2link);
                    document.getElementById("article-2-image").src = myArr.user.article2img;
                    document.getElementById("article-2-title").innerHTML = myArr.user.article2title;
                    document.getElementById("article-2-author").innerHTML = myArr.user.article2author;
                    document.getElementById("article-2-read-time").innerHTML = myArr.user.article2readtime;

                    document.getElementById("article3_link").setAttribute("href", myArr.user.article3link);
                    document.getElementById("article3_link1").setAttribute("href", myArr.user.article3link);
                    document.getElementById("article3_link2").setAttribute("href", myArr.user.article3link);
                    document.getElementById("article3_link3").setAttribute("href", myArr.user.article3link);
                    document.getElementById("article-3-image").src = myArr.user.article3img;
                    document.getElementById("article-3-title").innerHTML = myArr.user.article3title;
                    document.getElementById("article-3-author").innerHTML = myArr.user.article3author;
                    document.getElementById("article-3-read-time").innerHTML = myArr.user.article3readtime;
                }
            };
            xhr.open("GET", '/api/users/profile/<%=user%>', true);
            xhr.withCredentials = true;
            xhr.send();
    // fetch('http://localhost:8000/api/users/current').then(r => r.text()).then(result => {
    // document.getElementById("username").innerHTML = result.user.name;
    // console.log(result.user.name);
    // hold = document.getElementById("username");
    // console.log('hold', hold);
// })
        })();

        // document.getElementById("pname").innerHTML = result.user.name;




        
    }
    </script>
</body>
</html>