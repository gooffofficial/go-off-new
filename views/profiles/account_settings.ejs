<html>

<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-180244749-2"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-180244749-2');
	</script>
	<link rel="stylesheet" href="/css/account_settings.css">
	<link rel="stylesheet" href="/css/navigationBar.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
		integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>

<body>
	<nav class="navigationBar d-flex">
		<div class="navigationContainer d-flex">
			<img src="/GO_OFF_LOGO.svg" class="navigationLogo align-self-center">

			<div class="navigationIcons align-self-center">
				<a href=""><img src="/plus.svg" class="navIcon"></a>
				<a href=""><img src="/home.svg" class="navIcon"></a>
				<a href=""><img src="/mail.svg" class="navIcon"></a>
				<a href=""><img src="/notification.svg" class="navIcon"></a>
				<a href=""><img src="/chart.svg" class="navIcon"></a>
			</div>

			<div class="searchContainer align-self-center d-flex">
				<!-- <form id="bar_form"> SEARCH BAR NEEDS TO BE CONNECTED -->
				<img src="/search_icon.svg" class="search-icon align-self-center">
				<input type="text" id="search" placeholder="Search">
				<!-- </form> -->
			</div>

			<div class="navigationProfile d-flex">
				<div class="align-self-center">
					<a href="">
						<img id="fprofpic" src="https://miro.medium.com/max/316/1*LGHbA9o2BKka2obwwCAjWg.jpeg"
							class="navigationProfilePic">
						<p class="navigationProfileName"></p>

						<span id="pname"></span>
					</a>
				</div>

				<div class="droparrow align-self-center">
					<img onclick="dropclick1()" src="/chevron_down.svg" id="arrows" />
					<div id="arrowdrop" class="dropdown-arrowcontent">
						<a href="/profile">Profile</a>
						<a href="/profile_edit">Settings</a>
						<a href="https://www.go-off.co/">Log Out</a>
					</div>
				</div>
			</div>
		</div>
	</nav>

	<form id="bar_form"></form>

	<form action="/api/users/update" method="post" class="editProf">

		<h1 id="edit-profile-text">Account Settings</h1>

		<div id="doneCancel-container">
			<input type="submit" value="Done" id="submitBtn">
			<input type="reset" value="Cancel" id="cancelBtn">
		</div>

		<p id="desc">Set your login preferences and personalize your account.</p>

		<div class="accountSettingsContainer">
			<label for="email">Email</label><br>
			<input type="email" id="email_addr" name="email"><br>
	
			<label for="password">Password</label><br>
			<input type="text" id="passwrd" name="password"><br>
	
			<label for="location">Country/Region</label><br>
			<input type="text" id="Country" name="location"><br>
		</div>

		<fieldset id="Gender" name="gender">
			<p id="gender-text">GENDER</p>

			<input type="radio" id="Male" name="genderType">
			<label for="Male">MALE</label><br>

			<input type="radio" id="Female" name="genderType">
			<label for="Female">FEMALE</label><br>

			<input type="radio" id="Other" name="genderType">
			<input type="text" name="Other" placeholder="OTHER" id="other-gender-textbox">
		</fieldset>

		<div class="leftButtons">
			<a href="/profiles/<%=user%>" class="side-button">
				<img src="/short_left.svg" class="edit-profile-icon">
				BACK
			</a>
	
			<br><br><br>
		
			<a href="profile_edit" class="side-button">
				<img src="/pencil.svg" class="edit-profile-icon">
				EDIT PROFILE
			</a>
	
			<a href="account_settings" class="side-button selectedTab">
				<img src="/user_circle.svg" class="edit-profile-icon">
				ACCOUNT SETTINGS
			</a>
		</div>
	</form>
</body>

<script>
	// new search function, this needs to be redone
	// document.getElementById("bar_form").style.visibility = "hidden";

	// function searchBar() {
	// 	document.getElementById("Submit").style.visibility = "hidden";
	// 	document.getElementById("Plus").style.visibility = "hidden";
	// 	document.getElementById("Cancel").style.visibility = "visible";
	// 	document.getElementsByClassName('fprofpic')[0].style.visibility = "hidden";
	// 	document.getElementsByClassName('pname')[0].style.visibility = "hidden";
	// 	document.getElementById("bar_form").style.display = "none";
	// }

	// function searchBar1() {
	// 	document.getElementById("Submit").style.visibility = "visible";
	// 	document.getElementById("Plus").style.visibility = "visible";
	// 	document.getElementById("Cancel").style.visibility = "hidden";
	// 	document.getElementsByClassName('fprofpic')[0].style.visibility = "visible";
	// 	document.getElementsByClassName('pname')[0].style.visibility = "visible";
	// 	document.getElementById("bar_form").style.display = "block";
	// }

	function dropclick1() {
		var x = document.getElementById("arrowdrop");
		if (x.style.display === "none") {
			x.style.display = "block";
		} else {
			x.style.display = "none";
		}
	}

	(function () {
		var xhr = new XMLHttpRequest();
		xhr.onreadystatechange = function () {
			if (this.readyState == 4 && this.status == 200) {
				var myArr = JSON.parse(this.responseText);
				console.log(myArr);
				document.getElementById("pname").innerHTML = myArr.user.firstname + " " + myArr.user.lastname;
				document.getElementById("fprofpic").src = myArr.user.propic;
			}
		}
		xhr.open("GET", '/api/users/profile/<%=user%>', true);
		xhr.withCredentials = true;
		xhr.send();
	})();
</script>

</html>