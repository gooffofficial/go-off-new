<!DOCTYPE html>
<html>

<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-180244749-2"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-180244749-2');
	</script>
	<link id="pro-style" rel="stylesheet" href="/css/profile.css">
	<link rel="stylesheet" href="/css/navigationBar.css">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
		integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
	</script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
	</script>
	<!-- <script type="text/javascript" src="profile.js"></script> -->
	<title>Profile Page</title>
</head>

<body onload="fillinVar()">
	<nav class="navigationBar d-flex">
		<div class="navigationContainer d-flex">
			<img src="/GO_OFF_LOGO.svg" class="navigationLogo align-self-center">

			<div class="navigationIcons align-self-center">
				<!--<a href=""><img src="/plus.svg" class="navIcon"></a>-->
				<div class="droparrow align-self-center">
					<img onclick="dropclick1()" src="/plus.svg" id="arrows" />
					<div id="arrowdrop" class="dropdown-arrowcontent">
						<a data-target="#add-media" data-toggle="modal" class="MainNavText" id="media-adder"
						style="display: inline-block;" href="#add-media">Media</a>
					<!--<a href="/following" target="_blank" id="following-count" style="display: inline-block;"></a>-->
					<!-- Modal -->
					<div class="modal fade" id="add-media" tabindex="-1" role="dialog"
						aria-labelledby="exampleModalLabel" aria-hidden="true">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="exampleModalLabel">Media</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body">
									<form action="/api/users/add_article" method="post">
										<label for="userArticle">Url:</label>
										<input type="text" id="userArticle" name="userArticle">
										<input type="submit" value="Submit">
									</form>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
									<button type="button" class="btn btn-primary">Save changes</button>
								</div>
							</div>
						</div>
					</div>
						<a href="/profile_edit">Folder</a>
						<a href="https://www.go-off.co/">Convo</a>
					</div>
				</div>
				<a href=""><img src="/home.svg" class="navIcon"></a>
				<a href=""><img src="/mail.svg" class="navIcon"></a>
				<a href=""><img src="/notification.svg" class="navIcon"></a>
				<a href=""><img src="/chart.svg" class="navIcon"></a>
			</div>

			<div class="searchContainer align-self-center d-flex">
				<!-- <form id="bar_form"> SEARCH BAR NEEDS TO BE CONNECTED -->
				<img src="/search_icon.svg" class="search-icon align-self-center">
				<input type="text" id="search" placeholder="Search" autocomplete="off" onkeyup="plsWork(this.value)">
				<!-- </form> -->
				<!--<p>Suggestions: <span id="txtHint"></span></p>-->
			</div>

			<div id="search-input-results" style="visibility: hidden">
				<a id="search-1"></a>
				<a id="search-2"></a>
				<a id="search-3"></a>
				<a id="search-4"></a>
				<a id="search-5"></a>
			</div>

			<div class="navigationProfile d-flex">
				<div class="align-self-center">
					<a href="">
						<img id="fprofpic" src="https://miro.medium.com/max/316/1*LGHbA9o2BKka2obwwCAjWg.jpeg"
							class="navigationProfilePic">
						<p class="navigationProfileName"></p>

						<span id="pname"></span>
					</a>
				</div>

				<div class="droparrow align-self-center">
					<img onclick="dropclick1()" src="/chevron_down.svg" id="arrows" />
					<div id="arrowdrop" class="dropdown-arrowcontent">
						<a href="/profile">Profile</a>
						<a href="/profile_edit">Settings</a>
						<a href="https://www.go-off.co/">Log Out</a>
					</div>
				</div>
			</div>
		</div>
    </nav>
    <div class="top-box">
        <img id="article-pic" src="<%=articlePic%>">
        <div id="article-info-container">
            <a href="<%=artLink%>" id="article-link">article link</a>
            <!--<p id="article-author"></p>-->
			<h1 id="article-title"><%=artTitle%></h1>
			<button onclick="joinConvo()">RSVP</button>
        </div>
    </div>
	<button type="button" id="create-convo" onclick="dropmodal()">create convo</button>
	<div id="arrowdropmodal" class="dropdown-arrowcontent">
		<form id="createConvo" method="post" action="/api/convos/create">
			<label for="convoTime">Conversation Time</label>
			<input type="datetime-local" min=<%=date%> id="convoTime" name="convoTime">
			<!-- Sus security here -->
			<input type="hidden" id="article" name="article" value="<%=artLink%>">
			<input type="submit" value="submit">
		</form>
	</div>
    <p id="subheader">Upcoming Convos</p>
    <div class="upcoming-convo1">
        <img id="article-pic1" src="<%=articlePic%>">
        <h1 id="convo-host1">Hosted by: <%=hosts[0]%></h1>
        <p id="convo-time1"><%=convos[0].time%></p>
        <button type="button" onclick="joinConvo1()">RSVP</button>
	</div>
	<div class="upcoming-convo2">
        <img id="article-pic2" src="<%=articlePic%>">
        <h1 id="convo-host2">Hosted by: <%=hosts[1]%></h1>
        <p id="convo-time2"><%=convos[1].time%></p>
        <button type="button" onclick="joinConvo2()">RSVP</button>
    </div>
    <script>
        function dropclick1() {
			var x = document.getElementById("arrowdrop");
			if (x.style.display === "block") {
				x.style.display = "none";
			} else {
				x.style.display = "block";
			}
		}
		function dropmodal() {
			var x = document.getElementById("arrowdropmodal");
			if (x.style.display === "block") {
				x.style.display = "none";
			} else {
				x.style.display = "block";
			}
		}
		function joinConvo1(){
			console.log("HEEEEYYYYY")
			var xhr = new XMLHttpRequest();
			xhr.open("POST", '/api/convos/join', true);
			xhr.setRequestHeader('Content-Type', 'application/json');
			xhr.send(JSON.stringify({
    			convo: <%=convos[0].id%> 
			}));
		}
		function joinConvo2(){
			console.log("HEEEEYYYYY")
			var xhr = new XMLHttpRequest();
			xhr.open("POST", '/api/convos/join', true);
			xhr.setRequestHeader('Content-Type', 'application/json');
			xhr.send(JSON.stringify({
    			convo: <%=convos[1].id%> 
			}));
		}
    </script>
    </body>
    </html>